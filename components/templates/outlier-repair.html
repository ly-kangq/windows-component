<!doctype html>
<html lang="zh-CN">

<head>
  <!-- 必须的 meta 标签 -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Bootstrap 的 CSS 文件 -->
  <!-- <link rel="stylesheet" href="{{ url_for('static', filename='bootstrap-5.1.3-dist/css/bootstrap.min.css').lstrip('/') }}"> -->
  <link rel="stylesheet" href="{{ url_for('static', filename='bootstrap-5.1.3-dist/css/bootstrap.min.css').lstrip('/') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css').lstrip('/') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/toastr.min.css').lstrip('/') }}">
  <title>异常值修复</title>
</head>

<script>
  function test(Names){
    for (var i=1;i<3;i++){    //  更改数字4可以改变选择的内容数量，在下拉总数值的基础上+1.比如：下拉菜单有5个值，则4变成6
        var tempname="mune_x"+i;
        var NewsHot="x"+i;    //  “X”是ID名称，比如：ID命名为“case1”，这里的“X”即为“case”
        if (Names === tempname){
            Nnews = document.getElementById(NewsHot);
            Nnews.style.display='block';
        }else{
            Nnews = document.getElementById(NewsHot);
            Nnews.style.display='none';
        }
    }
  }
  </script>

<body>
  <div class="container">
    <ul class="nav nav-tabs" id="configTabs" role="tablist">
      <li class="nav-item">
        <a class="nav-link active" id="param-tab" data-bs-toggle="tab" role="tab" type="button"
          data-bs-target="#paramdisplay" aria-selected="false">参数配置</a>
      </li>
    </ul>

    <div class="tab-content" id="configs">
      <div class="tab-pane fade show active" id="paramdisplay" role="tabpanel" aria-labelledby="param-tab">


        <div class="form-group row">
          <form>
            <label for="Method" class="col-4 col-form-label">异常值修复方式：</label>
              <select class="form-select" id="Method" onChange="test('mune_x'+this.value)" required>
                <option id= "select" value="0" disabled selected hidden>{{method}}</option>
                <option id= "bound-replace" value="1">越界替换</option>
                <option id= "bound-abandon" value="2">越界舍弃</option>
              </select>
          </form>
        </div>
          

        
        <div id="x1" class="row" style="display:none">
          <div class="form-group" style="margin-top: 10px;">
            <form>
              <label class="col-form-label">位点序号：</label>
              <input type="text" class="form-control" id="x1_point_index" name="x1_point_index" placeholder="default: all points, eg: 1,4,6,8" value="{{x1_point_index_rec}}">
            </form>
          </div>

          <div class="form-group" style="margin-top: 10px;">
            <form>
              <label class="col-form-label">容忍误差：</label>
              <input type="text" class="form-control" id="x1_tolerance_error" name="x1_tolerance_error" placeholder="default: 0, range: 0~1" value="{{x1_tolerance_error_rec}}">
            </form>
          </div>
        </div>

        <div id="x2" class="row" style="display:none">
          <div class="form-group" style="margin-top: 10px;">
            <form>
              <label class="col-form-label">位点序号：</label>
              <input type="text" class="form-control" id="x2_point_index" name="x2_point_index" placeholder="default: all points, eg: 1,4,6,8" value="{{x2_point_index_rec}}">
            </form>
          </div>

          <div class="form-group" style="margin-top: 10px;">
            <form>
              <label class="col-form-label">容忍误差：</label>
              <input type="text" class="form-control" id="x2_tolerance_error" name="x2_tolerance_error" placeholder="default: 1, range: 0~1" value="{{x2_tolerance_error_rec}}">
            </form>
          </div>
        </div>

        <!-- <div class="form-group">
          <form>
            <label class="col-form-label">修正方式：</label>
            <select class="form-select" id="Method" required>
              <option id= "select" value="0" disabled selected hidden>{{method}}</option>
              <option id= "on" value="1">上下限替换</option>
              <option id= "off" value="2">上下限舍弃</option>
            </select>
          </form>
        </div> -->


          <div class="row submitBtn">
            <div class="col">
              <button id="submit_x" type="submit" name="submit_x" class="btn btn-primary" value="">保 存</button>
            </div>
          </div>
        <!-- </div> -->

      </div>
    </div>
  </div>
  <script type="text/javascript" src="{{ url_for('static',filename='js/jquery-3.5.1.min.js').lstrip('/') }}"></script>
  <script type="text/javascript" src="{{ url_for('static',filename='bootstrap-5.1.3-dist/js/bootstrap.bundle.js').lstrip('/') }}"></script>
  <script type="text/javascript" src="{{ url_for('static',filename='js/jquery.serializejson.min.js').lstrip('/') }}"></script>
  <script type="text/javascript" src="{{ url_for('static',filename='js/toastr.min.js').lstrip('/') }}"></script>
  <script>
    // 参数配置
    $('#submit_x').click(function(){
      var flag = 1;
      var url = 'paramconfig';
      var Method = '';
      var params = {};
      var tolerance_error = $("#tolerance_error").val()
      var option_val = $('.form-group').find("option:selected").val();

      if (option_val == '0'){
        flag = 0
        toastr.error('请选择异常值修复方式');        
      }
      if(option_val === '1'){
        Method = '越界替换';
      }
      if(option_val === '2'){
        Method = '越界舍弃';
      }
      params.Method = Method;
      params.tolerance_error = tolerance_error;
      if (flag == 1){
        $.post(url,params,function(res){
        toastr.success('配置保存成功');
      })
      }

    })
  </script>

  <script>
    var method_mode = $('#Method option:first').html(); 
    var option_val = ''
    console.log(method_mode);
    if (method_mode == '越界替换'){
      option_val = '1'
    }
    if (method_mode == '越界舍弃'){
      option_val = '2'
    }    
    console.log(option_val)
    $('.form-group').find("option:selected").val(option_val);
  </script>

</body>

</html>